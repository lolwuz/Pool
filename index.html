<!DOCTYPE html>
<html>
<head>
    <meta charset=utf-8>
    <title>My first three.js app</title>
    <style>
        body { margin: 0; }
        canvas { width: 100%; height: 100% }
    </style>
</head>
<body>
<script src="js/three.js"></script>
<script src="Objects/Ball.js"></script>
<script>
    // Our Javascript will go here.
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera( 45, window.innerWidth/window.innerHeight, 0.1, 1000 );

    let renderer = new THREE.WebGLRenderer({antialias:true});
    renderer.setClearColor(0xCCCCFF, 1);
    renderer.setSize( window.innerWidth, window.innerHeight );
    document.body.appendChild( renderer.domElement );


    let ball1 = new Ball(0xFFFFFF, {x: 0, y: -5}); // White ball
    let ball2 = new Ball(0xFFFFFF, {x: 0, y: 5});
    let ball3 = new Ball(0xFFFFFF, {x: -0.51, y: 6});
    let ball4 = new Ball(0xFFFFFF, {x: 0.51, y: 6});
    let ball5 = new Ball(0xFFFFFF, {x: -1.01, y: 7});
    let ball6 = new Ball(0xFFFFFF, {x: 0, y: 7});
    let ball7 = new Ball(0xFFFFFF, {x: 1.01, y: 7});
    let ball8 = new Ball(0xFFFFFF, {x: -1.53, y: 8});
    let ball9 = new Ball(0xFFFFFF, {x: -0.51, y: 8});
    let ball10 = new Ball(0xFFFFFF, {x: 0.51, y: 8});
    let ball11 = new Ball(0xFFFFFF, {x: 1.53, y: 8});
    let ball12 = new Ball(0xFFFFFF, {x: -2.02, y: 9});
    let ball13 = new Ball(0xFFFFFF, {x: -1.01, y: 9});
    let ball14 = new Ball(0xFFFFFF, {x: 0, y: 9});
    let ball15 = new Ball(0xFFFFFF, {x: 1.01, y: 9});
    let ball16 = new Ball(0xFFFFFF, {x: 2.02, y: 9});


    scene.add(ball1);
    scene.add(ball2);
    scene.add(ball3);
    scene.add(ball4);
    scene.add(ball5);
    scene.add(ball6);
    scene.add(ball7);
    scene.add(ball8);
    scene.add(ball9);
    scene.add(ball10);
    scene.add(ball11);
    scene.add(ball12);
    scene.add(ball13);
    scene.add(ball14);
    scene.add(ball15);
    scene.add(ball16);


    let ballArray = [ ball1, ball2, ball3, ball4, ball5, ball6, ball7, ball8, ball9, ball10, ball11, ball12, ball13, ball14, ball15, ball16 ];
    // Light
    let ambientLight = new THREE.AmbientLight(0xFFFFFF, 0.2);
    let lightBulb1 = new THREE.PointLight(0xFFFFFF, 0.5, 50);
    let lightBulb2 = new THREE.PointLight(0xFFFFFF, 0.5, 50);

    scene.add(ambientLight);
    scene.add(lightBulb1);
    scene.add(lightBulb2);

    lightBulb1.position.set( 0, 5, 8 );
    lightBulb2.position.set( 0, -5, 8 );

    camera.position.z = 50;

    ball1.speed.x = 0;
    ball1.speed.y = 0.2;

    let clock = new THREE.Clock(); 

    function animate(){
        requestAnimationFrame( animate );
        let deltaTime = 60 * clock.getDelta();

        for (let i = 0; i < ballArray.length; i++) {
            for(let ii=0; ii < ballArray.length; ii++){
                if(ballArray[i] !== ballArray[ii]){
                    ballArray[i].checkCollision(ballArray[ii]);
                }
            }
            ballArray[i].move(deltaTime);
        }
        renderer.render(scene, camera);
    }

    animate();
</script>
</body>
</html>